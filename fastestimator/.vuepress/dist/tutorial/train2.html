<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to train with FastEstimator | FastEstimator</title>
    <meta name="description" content="Just Playing Around">
    
    
    <link rel="preload" href="/assets/css/0.styles.1280d75e.css" as="style"><link rel="preload" href="/assets/js/app.80f16663.js" as="script"><link rel="preload" href="/assets/js/2.e9aea229.js" as="script"><link rel="preload" href="/assets/js/10.e3ad79a1.js" as="script"><link rel="prefetch" href="/assets/js/11.b7ea0b1a.js"><link rel="prefetch" href="/assets/js/3.5f9e62d6.js"><link rel="prefetch" href="/assets/js/4.3c2a86f1.js"><link rel="prefetch" href="/assets/js/5.6e4ee20b.js"><link rel="prefetch" href="/assets/js/6.8f769d7f.js"><link rel="prefetch" href="/assets/js/7.b29394a4.js"><link rel="prefetch" href="/assets/js/8.ed683b3b.js"><link rel="prefetch" href="/assets/js/9.d73c438b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1280d75e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">FastEstimator</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tutorial</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorial/install/" class="nav-link">install</a></li><li class="dropdown-item"><!----> <a href="/tutorial/build/" class="nav-link">build model</a></li><li class="dropdown-item"><!----> <a href="/tutorial/train/" class="nav-link">train model</a></li></ul></div></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="https://github.com/fastestimator/fastestimator" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tutorial</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorial/install/" class="nav-link">install</a></li><li class="dropdown-item"><!----> <a href="/tutorial/build/" class="nav-link">build model</a></li><li class="dropdown-item"><!----> <a href="/tutorial/train/" class="nav-link">train model</a></li></ul></div></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="https://github.com/fastestimator/fastestimator" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>How to train with FastEstimator</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/train2.html#example-1-using-entry-point-only" class="sidebar-link">Example 1: Using entry point only</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tutorial/train2.html#example-2-using-entry-point-with-arguments" class="sidebar-link">Example 2: Using entry point with arguments</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tutorial/train2.html#example-3-using-json-file-as-arguments" class="sidebar-link">Example 3: Using JSON file as arguments</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tutorial/train2.html#example-4-train-in-python-console" class="sidebar-link">Example 4: Train in python console</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Users can choose one of two ways to start training. Here's the general
rule of thumb:</p> <ul><li>Use Command Line Interface for:
<ul><li>General purpose training</li> <li>Distributed training</li> <li>Hyperparameter tuning</li></ul></li> <li>Use Python Console for:
<ul><li>Debugging</li></ul></li></ul> <p>Next We use Mnist data as example to demonstrate various ways to launch
training jobs.</p> <h1 id="command-line-interface"><a href="#command-line-interface" aria-hidden="true" class="header-anchor">#</a> Command Line Interface</h1> <p>[fastestimator]{.title-ref} command will be available after
installation, in order to use the command, users should prepare entry
point -- python script that defines the [get_estimator]{.title-ref}
function. Here's the usage:</p> <div class="language-{.sourceCode .bash} extra-class"><pre class="language-text"><code>fastestimator train  

Required arguments:

--entry_point:      Path of python script that defines 'get_estimator' 

Optional arguments:

--input:            Directory where tfrecord is saved or will be saved 
                    (default: /tmp/FEdataset)
--hyperparameters:  Path of JSON file that defines the input arguments of 
                    'get_estimator' in a dictionary format (default: None)
--num_process:      Number of parallel training process (default: 1)
--arg1:             Input argument1 of `get_estimator` function (default: None)
...                 ...
--argN:             Input argumentN of `get_estimator` function (default: None)
</code></pre></div><h2 id="example-1-using-entry-point-only"><a href="#example-1-using-entry-point-only" aria-hidden="true" class="header-anchor">#</a> Example 1: Using entry point only</h2> <p>In this example, [get_estimator]{.title-ref} takes default argument or
no argument (see
<a href="https://github.build.ge.com/edisonaitk/fastestimator/blob/master/tutorial/mnist.py" target="_blank" rel="noopener noreferrer">mnist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>).
This format is best suited for running a quick single experiment.</p> <div class="language-{.sourceCode .bash} extra-class"><pre class="language-text"><code>fastestimator train --entry_point mnist.py 
</code></pre></div><p>if you want to save tfrecord to a specific direcoty (E.g, /data/mnist):</p> <div class="language-{.sourceCode .bash} extra-class"><pre class="language-text"><code>fastestimator train --entry_point mnist.py --input /data/mnist
</code></pre></div><h2 id="example-2-using-entry-point-with-arguments"><a href="#example-2-using-entry-point-with-arguments" aria-hidden="true" class="header-anchor">#</a> Example 2: Using entry point with arguments</h2> <p>In this case, user can pass arguments of [get_estimator]{.title-ref}
from command line. This is useful when experimenting different
parameters.</p> <div class="language-{.sourceCode .bash} extra-class"><pre class="language-text"><code>fastestimator train \
--entry_point mnist.py \
--input /data/mnist \
--epochs 3 \
--batch_size 64 \
--optimizer sgd
</code></pre></div><h2 id="example-3-using-json-file-as-arguments"><a href="#example-3-using-json-file-as-arguments" aria-hidden="true" class="header-anchor">#</a> Example 3: Using JSON file as arguments</h2> <p>It may be cool to pass two or three arguments on terminal, but when the
number of arguments is too big (say ~100), it doesn't seem so cool
anymore. Alternatively, you pass a <a href="https://github.build.ge.com/edisonaitk/fastestimator/blob/master/tutorial/mnist_args.json" target="_blank" rel="noopener noreferrer">JSON
file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
that contains all arguments of [get_estimator]{.title-ref} in a
dictionary format.</p> <div class="language-{.sourceCode .bash} extra-class"><pre class="language-text"><code>python -m fastestimator.fit \
--entry_point mnist.py \
--input /data/mnist \
--hyperparameters mnist_args.json
</code></pre></div><h1 id="python-console"><a href="#python-console" aria-hidden="true" class="header-anchor">#</a> Python Console</h1> <h2 id="example-4-train-in-python-console"><a href="#example-4-train-in-python-console" aria-hidden="true" class="header-anchor">#</a> Example 4: Train in python console</h2> <p>For users that prefer running codes in python console (e.g., Jupyter
notebook, Spyder, Pycharm), check out <a href="https://github.build.ge.com/edisonaitk/fastestimator/blob/master/tutorial/mnist.ipynb" target="_blank" rel="noopener noreferrer">this
notebook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
for python console training.</p> <div class="language-{.sourceCode .python} extra-class"><pre class="language-text"><code>def get_estimator(...)
...
return estimator

estimator = get_estimator(...)
estimator.fit(&quot;/data/mnist&quot;)
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.80f16663.js" defer></script><script src="/assets/js/2.e9aea229.js" defer></script><script src="/assets/js/10.e3ad79a1.js" defer></script>
  </body>
</html>
